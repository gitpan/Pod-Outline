#!/usr/bin/perl -Tw

=head1 NAME

pod-outline - Dumps a POD file in outline form

=cut

use warnings;
use strict;

use Getopt::Long;
use Pod::Usage;
use Pod::Outline;

my @actions;
my $absolute;

GetOptions( 
    help	    => sub { pod2usage(1); },
    'V|version'     => sub { print_version(); exit; },
) or pod2usage(2); 

local $/ = ""; # paragraph mode
while ( my $para = <> ) {
    next unless $para =~ s/^=head(\d)\s+//;

    my $level = $1;
    chomp $para;

    print " " x (($level-1)*4) if $level > 1;
    print "$para\n";
}

sub print_version {
    printf( "pod-outline v%s\n", $Pod::Outline::VERSION );
}
